<!-- pages/characters.html -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>タイプ一覧</title>

  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/tokens.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/index.css">
</head>

<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="title">タイプ一覧</div>
      <div class="subtitle">32タイプ（U/O・M/C・H/L・D/S・R/X）</div>
    </div>

    <div class="topbar__right topbar__right--safe">
      <a class="btn btn--ghost" href="../index.html">診断へ戻る</a>
    </div>
  </header>

  <main class="wrap">
    <div class="card">
      <div class="muted">カードをタップすると詳細へ移動します（例: type.html?t=OMHSX）。</div>
    </div>

    <div class="grid" id="grid"></div>
  </main>

  <script type="module">
    import { allTypes, getTypeInfo } from "../js/characters.js";

    const grid = document.getElementById("grid");

    function card(t) {
      const info = getTypeInfo(t);

      const a = document.createElement("a");
      a.href = `./type.html?t=${encodeURIComponent(t)}`;
      a.className = "card";
      a.style.display = "block";

      const top = document.createElement("div");
      top.style.display = "flex";
      top.style.alignItems = "center";
      top.style.justifyContent = "space-between";
      top.style.gap = "10px";

      const tag = document.createElement("div");
      tag.className = "badge";
      tag.textContent = info?.group?.name ?? "GROUP";

      const dot = document.createElement("div");
      dot.style.width = "12px";
      dot.style.height = "12px";
      dot.style.borderRadius = "999px";
      dot.style.background = info?.color ?? "rgba(255,255,255,.35)";
      dot.style.border = "1px solid rgba(255,255,255,.18)";

      top.appendChild(tag);
      top.appendChild(dot);

      const title = document.createElement("div");
      title.style.fontSize = "22px";
      title.style.fontWeight = "900";
      title.style.marginTop = "10px";
      title.textContent = `${info?.code ?? t} - ${info?.name ?? ""}`;

      const sub = document.createElement("div");
      sub.className = "muted";
      sub.style.marginTop = "6px";
      sub.textContent = info?.axesText ?? "";

      a.appendChild(top);
      a.appendChild(title);
      a.appendChild(sub);

      return a;
    }

    // grid style
    grid.style.display = "grid";
    grid.style.gridTemplateColumns = "repeat(2, minmax(0, 1fr))";
    grid.style.gap = "12px";
    grid.style.marginTop = "12px";

    for (const t of allTypes) grid.appendChild(card(t));
  </script>
</body>
</html>
