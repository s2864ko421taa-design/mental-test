<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ã‚¿ã‚¤ãƒ—ä¸€è¦§</title>

  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/tokens.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/index.css">
</head>

<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="title">ã‚¿ã‚¤ãƒ—ä¸€è¦§</div>
      <div class="subtitle">32ã‚¿ã‚¤ãƒ—ï¼ˆU/Oãƒ»M/Cãƒ»H/Lãƒ»D/Sãƒ»R/Xï¼‰</div>
    </div>
    <div class="topbar__right topbar__right--safe">
      <a class="btn btn--ghost" href="../index.html">è¨ºæ–­ã¸æˆ»ã‚‹</a>
    </div>
  </header>

  <main class="wrap">
    <div class="card">
      <div class="muted">
        ã‚«ãƒ¼ãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨è©³ç´°ã¸ç§»å‹•ã—ã¾ã™ï¼ˆä¾‹ï¼štype.html?t=OMHSXï¼‰
      </div>
    </div>

    <div class="grid" id="grid"></div>
  </main>

<script type="module">
import { allTypes, getTypeInfo } from "../js/characters.js";

const grid = document.getElementById("grid");

/* ===============================
   ğŸ”¥ ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ çµµæ–‡å­—ï¼‹ã‚«ãƒ©ãƒ¼
   =============================== */
function groupMeta(code) {
  const first = code[0]; // U / O
  const second = code[1]; // M / C

  if (first === "U" && second === "M")
    return { icon: "ğŸŸ©", color: "#22c55e" };

  if (first === "U" && second === "C")
    return { icon: "ğŸŸ¦", color: "#3b82f6" };

  if (first === "O" && second === "M")
    return { icon: "ğŸŸª", color: "#a855f7" };

  if (first === "O" && second === "C")
    return { icon: "ğŸŸ¥", color: "#ef4444" };

  return { icon: "â¬œ", color: "#888" };
}

function card(typeCode) {
  const info = getTypeInfo(typeCode);
  const meta = groupMeta(typeCode);

  const a = document.createElement("a");
  a.href = `./type.html?t=${encodeURIComponent(typeCode)}`;
  a.className = "card";
  a.style.display = "block";

  /* ä¸Šæ®µ */
  const top = document.createElement("div");
  top.style.display = "flex";
  top.style.alignItems = "center";
  top.style.justifyContent = "space-between";
  top.style.gap = "10px";

  const tag = document.createElement("div");
  tag.className = "badge";
  tag.textContent = info?.group?.name ?? "GROUP";

  const dot = document.createElement("div");
  dot.style.width = "12px";
  dot.style.height = "12px";
  dot.style.borderRadius = "999px";
  dot.style.background = meta.color;

  top.appendChild(tag);
  top.appendChild(dot);

  /* 1è¡Œç›®ï¼šè‰²ï¼‹ã‚³ãƒ¼ãƒ‰ */
  const title = document.createElement("div");
  title.style.fontSize = "22px";
  title.style.fontWeight = "900";
  title.style.marginTop = "10px";
  title.textContent = `${meta.icon} ${typeCode}`;

  /* 2è¡Œç›®ï¼šæ—¥æœ¬èªå */
  const jp = document.createElement("div");
  jp.className = "muted";
  jp.style.marginTop = "6px";
  jp.textContent = info?.label ?? "";

  /* 3è¡Œç›®ï¼šè»¸èª¬æ˜ */
  const sub = document.createElement("div");
  sub.className = "muted";
  sub.style.marginTop = "6px";
  sub.textContent = info?.axesText ?? "";

  a.appendChild(top);
  a.appendChild(title);
  a.appendChild(jp);
  a.appendChild(sub);

  return a;
}

/* ã‚°ãƒªãƒƒãƒ‰ */
grid.style.display = "grid";
grid.style.gridTemplateColumns = "repeat(2, minmax(0, 1fr))";
grid.style.gap = "12px";
grid.style.marginTop = "12px";

for (const t of allTypes) {
  grid.appendChild(card(t));
}
</script>
</body>
</html>
