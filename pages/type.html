<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>タイプ詳細</title>
<link rel="stylesheet" href="../css/style.css" />
</head>

<body>
<header class="topbar">
  <div class="topbar__left">
    <h1 class="title">キャラ詳細</h1>
    <p class="subtitle">タイプの説明・強み・注意点・おすすめ行動</p>
  </div>
  <div class="topbar__right">
    <a class="btn btn--ghost" href="./characters.html">タイプ一覧</a>
    <a class="btn btn--ghost" href="../index.html">診断へ戻る</a>
  </div>
</header>

<main class="wrap">
  <div class="card hero" id="hero">
    <div class="heroTop">
      <div>
        <div class="heroName" id="name">読み込み中...</div>
        <div class="heroType" id="type">-----</div>
      </div>

      <div class="badgeColor">
        <div class="colorDot" id="colorDot"></div>
        <div class="muted" id="colorText">color</div>
      </div>
    </div>

    <p class="desc" id="summary"></p>

    <div class="sectionTitle">強み</div>
    <ul class="list" id="strengths"></ul>

    <div class="sectionTitle">注意点</div>
    <ul class="list" id="pitfalls"></ul>

    <div class="sectionTitle">おすすめ行動</div>
    <ul class="list" id="tips"></ul>

    <div class="sectionTitle">キャラ例</div>
    <ul class="list" id="examples"></ul>
  </div>
</main>

<script type="module">
  import { getTypeInfo } from "../js/characters.js";

  const params = new URLSearchParams(location.search);
  const t = (params.get("t") || "").toUpperCase().trim();

  const valid = /^[UO][MC][HL][DS][RX]$/.test(t);
  const type = valid ? t : "UMHDR"; // 変でも落ちない

  const info = getTypeInfo(type);

  document.title = "タイプ詳細 - " + info.type;

  document.getElementById("name").textContent = info.name;
  document.getElementById("type").textContent = info.type;
  document.getElementById("summary").textContent = info.summary;

  const dot = document.getElementById("colorDot");
  dot.style.background = info.color;
  dot.style.boxShadow = `0 0 0 3px color-mix(in srgb, ${info.color} 22%, transparent)`;

  document.getElementById("colorText").textContent = info.color;

  const fillList = (id, arr)=>{
    const ul = document.getElementById(id);
    ul.innerHTML = "";
    for(const x of arr){
      const li = document.createElement("li");
      li.textContent = x;
      ul.appendChild(li);
    }
  };

  fillList("strengths", info.strengths || []);
  fillList("pitfalls", info.pitfalls || []);
  fillList("tips", info.tips || []);
  fillList("examples", info.examples || []);
</script>
</body>
</html>
