<!-- pages/type.html -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>タイプ詳細</title>

  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/tokens.css">
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/components.css">
  <link rel="stylesheet" href="../css/index.css">
</head>

<body>
  <header class="topbar">
    <div class="topbar__left">
      <div class="title" id="pageTitle">タイプ詳細</div>
      <div class="subtitle" id="pageSub"></div>
    </div>
    <div class="topbar__right">
      <a class="btn btn--ghost" href="./characters.html">一覧へ</a>
      <a class="btn btn--ghost" href="../index.html">診断へ</a>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="resultHeader">
        <div>
          <div class="resultTitle">あなたのタイプ</div>
          <div class="resultType" id="typeCode">-----</div>
        </div>
        <div class="resultBadge" id="groupBadge">GROUP</div>
      </div>

      <p class="resultDesc" id="desc"></p>
    </section>

    <section class="card">
      <div class="qtitle">強み</div>
      <div class="muted" style="margin-top:6px">上位ほど “使うと勝てる” 性質。</div>
      <ul id="strengths" style="margin-top:10px; line-height:1.7"></ul>
    </section>

    <section class="card">
      <div class="qtitle">弱点・事故ポイント</div>
      <ul id="cautions" style="margin-top:10px; line-height:1.7"></ul>
    </section>

    <section class="card">
      <div class="qtitle">おすすめ行動</div>
      <ul id="tips" style="margin-top:10px; line-height:1.7"></ul>
    </section>
  </main>

  <script type="module">
    import { getTypeInfo } from "../js/characters.js";

    const params = new URLSearchParams(location.search);
    const t = (params.get("t") || "").toUpperCase().trim();
    const info = getTypeInfo(t);

    const $ = (id) => document.getElementById(id);

    $("typeCode").textContent = info.code;
    $("pageTitle").textContent = `タイプ詳細：${info.code}`;
    $("pageSub").textContent = info.axesText || "";

    $("groupBadge").textContent = info.group?.name || "GROUP";
    $("groupBadge").style.borderColor = info.color;
    $("groupBadge").style.color = "#eaf0ff";
    $("groupBadge").style.background = "rgba(255,255,255,.06)";

    $("desc").textContent = info.description || "";

    const fillList = (ulId, arr) => {
      const ul = $(ulId);
      ul.innerHTML = "";
      (arr || []).forEach((text) => {
        const li = document.createElement("li");
        li.textContent = text;
        ul.appendChild(li);
      });
    };

    fillList("strengths", info.strengths);
    fillList("cautions", info.cautions);
    fillList("tips", info.tips);
  </script>
</body>
</html>
